program: /net/pulsar/home/koes/jok120/repos/sidechainnet/sidechainnet/research/cluster/train.py
method: bayes
metric:
  name: Valid-50 Epoch RMSE
  goal: minimize
parameters:
  name:
    distribution: constant
    value: sweep
  epochs:
    distribution: constant
    value: 500
  batch_size:
    distribution: categorical
    values:
      - 1
      - 2
      - 4
      - 6
      - 8
      - 10
      - 16
      - 24
      - 32
  n_heads:
    distribution: categorical
    values:
      - 1
      - 2
      - 4
      - 8
      - 16
  d_seq_embedding:
    distribution: categorical
    values:
      - 16
      - 32
      - 64
      - 128
      - 256
      - 512
  d_in:
    distribution: categorical
    values:
      - 128
      - 256
      - 512
      - 1024
      - 2048 
  dropout:
    values: [0.15, 0.2, 0.25, 0.3, 0.4]
  n_layers:
    distribution: int_uniform
    min: 1
    max: 16
  optimizer:
    distribution: categorical
    values:
      - sgd
      - adam
      # - AdamWeightDecay
      # - LinearWithWarmup
      # - Adafactor
  n_warmup_steps:
    distribution: categorical
    values:
      - 1000
      - 5000
      - 10000
  d_feedforward:
    distribution: categorical
    values:
      - 256
      - 512
      - 1024
      - 2048
  learning_rate:
    distribution: categorical
    values:
      - 0.1
      - 0.01
      - 0.001
      - 0.0001
      - 0.00001
      - 0.000001
  model:
    distribution: categorical
    values:
      - scn-trans-enc
  lr_scheduling:
    distribution: categorical
    values:
      - noam
      - plateau
  loss:
    distribution: categorical
    values:
      - mse
  seed:
    distribution: int_uniform
    min: 1
    max: 23462
  weight_decay:
    values:
      - "true"
      - "false"
    distribution: categorical
early_terminate:
  type: hyperband
  min_iter: 3
